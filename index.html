<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- ✅ 모바일 확대 완전 방지 -->
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0,
                   minimum-scale=1.0, maximum-scale=1.0,
                   user-scalable=no, viewport-fit=cover">

    <title>아쿠아리움_뱀 게임</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <div style="text-align: center;">
        <h1 id="title">Aquarium Snake Game</h1>
        <p>
            화살표 키 사용 가능합니다. <br/>
            START 버튼이나 SPACE BAR를 눌러 게임을 시작하세요!
        </p>

        <div id="score_board">
            <span id="best_score">BEST SCORE: 0</span> |
            <span id="my_score">SCORE: 0</span><br>
            
            <!-- 🎮 닉네임 입력 추가 -->
            <input type="text" id="player_name_input" placeholder="닉네임 입력" maxlength="12">
            <button id="save_name_btn">확인</button>
            <div id="player_name_display"></div>
        </div>

        <div id="game_container">
            <canvas id="game_area"></canvas>

            <div id="control_panel">
                <div class="dpad">
                    <button class="btn up">UP</button>
                    <div class="middle-row">
                        <button class="btn left">LEFT</button>
                        <button class="btn right">RIGHT</button>
                    </div>
                    <button class="btn down">DOWN</button>
                </div>

                <div class="startpause">
                    <button id="start">START</button>
                    <button id="pause" disabled>PAUSE</button>
                </div>
            </div>
        </div>

        <p id="copyright">
            제작자: @REAPPEARANCE
        </p>
    </div>

    <!-- 외부 게임 로직 -->
    <script src="script.js"></script>

    <!-- ✅ 확대 방지용 인라인 스크립트 -->
    <script>
        const captureOpts = { passive: false, capture: true };

        // 1) 핀치 줌(두 손가락) 완전 방지
        document.addEventListener('touchstart', e => {
            if (e.touches.length > 1) e.preventDefault();
        }, captureOpts);
        document.addEventListener('touchmove', e => {
            if (e.touches.length > 1) e.preventDefault();
        }, captureOpts);

        // 2) 더블탭 확대 방지
        let lastTouchEnd = 0;
        document.addEventListener('touchend', e => {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) e.preventDefault();
            lastTouchEnd = now;
        }, captureOpts);

        // 3) 더블클릭 확대 방지
        document.addEventListener('dblclick', e => e.preventDefault(), captureOpts);

        // 4) 제스처 이벤트 (iOS Safari 대응)
        ['gesturestart', 'gesturechange', 'gestureend'].forEach(type => {
            document.addEventListener(type, e => e.preventDefault(), captureOpts);
        });
    </script>
</body>
</html>
